<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>miniChemistry.Core.Tools package &#8212; miniChemistry 0.09 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=27fed22d" />
    <script src="_static/documentation_options.js?v=4f30f41c"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="miniChemistry.Utilities package" href="miniChemistry.Utilities.html" />
    <link rel="prev" title="miniChemistry.Core.ReactionMechanisms package" href="miniChemistry.Core.ReactionMechanisms.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="minichemistry-core-tools-package">
<h1>miniChemistry.Core.Tools package<a class="headerlink" href="#minichemistry-core-tools-package" title="Link to this heading">¶</a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Link to this heading">¶</a></h2>
</section>
<section id="module-miniChemistry.Core.Tools.Equalizer">
<span id="minichemistry-core-tools-equalizer-module"></span><h2>miniChemistry.Core.Tools.Equalizer module<a class="headerlink" href="#module-miniChemistry.Core.Tools.Equalizer" title="Link to this heading">¶</a></h2>
<p>Equalizer is a class that is used only to equate chemical reactions. Actually, this can be thought of as a function
implemented in a form of a class for convenience. The theoretical function would have the following signature:</p>
<p>equate(reagents: List[Union[Simple, Molecule]], products: List[Union[Simple, Molecule]]) -&gt; Dict[str, int]</p>
<p>So, it takes in instances of Simple or Molecule as reagents and products, and returns a dict with keys being substances’
formulas and values being their coefficients. For example,</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">H2</span> <span class="o">=</span> <span class="n">Simple</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="s1">&#39;H2&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">O2</span> <span class="o">=</span> <span class="n">Simple</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="s1">&#39;O2&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">H2O</span> <span class="o">=</span> <span class="n">Molecule</span><span class="o">.</span><span class="n">water</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">equalizer</span> <span class="o">=</span> <span class="n">Equalizer</span><span class="p">(</span><span class="n">reagents</span><span class="o">=</span><span class="p">[</span><span class="n">H2</span><span class="p">,</span> <span class="n">O2</span><span class="p">],</span> <span class="n">products</span><span class="o">=</span><span class="p">[</span><span class="n">H2O</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">equalizer</span><span class="o">.</span><span class="n">coefficients</span>
<span class="go">{&#39;H2&#39;: 2, &#39;O2&#39;: 1, &#39;H2O&#39;: 2}</span>
</pre></div>
</div>
<p>In this class only keyword arguments are used to avoid confusion between reagents and products.</p>
<dl class="py class">
<dt class="sig sig-object py" id="miniChemistry.Core.Tools.Equalizer.Equalizer">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">miniChemistry.Core.Tools.Equalizer.</span></span><span class="sig-name descname"><span class="pre">Equalizer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">reagents</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">products</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#miniChemistry.Core.Tools.Equalizer.Equalizer" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Equalizer class has several methods and properties that split a large (theoretical) function that equates the
reaction.
NOTE: in fact, no instance of Reaction class is used here, since an instance of Equalizer is used in Reaction
constructor to (surprise) equate a reaction.</p>
<p>The properties that the class has are
- reagents: List[Union[Simple, Molecule]]
- products: List[Union[Simple, Molecule]]
- matrix: sympy.Matrix
- coefficients: Dict[str, int]</p>
<p>The following methods are used to equate the reaction:
_elements: takes in Simple or Molecule instances and returns a list of pt.Element instances
_create_matrix: creates a matrix (explained below) from substance’s composition
_make_integers: converts all numbers in a Matrix to whole numbers (multiplies the matrix by a number)
_get_coefficients: actually solves the system of equations and returns the dict</p>
<p>Algorithm:
The algorithm is based on the law of conservation of mass, i.e. the number of atoms of each element from both sides
of the equation must be the same. Or, expressing this in mathematical terms, we can write</p>
<p>sum(reagent_coefficient * element_index) - sum(product_coefficient * element_index) = 0</p>
<p>So, to implement this here, we create a matrix in the following form: every column represents a substance, every
row represents an element. For example, for a reaction H2 + O2 -&gt; H2O the matrix will look like</p>
<blockquote>
<div><p>H2  O2  H2O</p>
</div></blockquote>
<p>H   2   0   -2
O   0   2   -1</p>
<p>Which represents two equations – the law of conservation of mass for each element. For hydrogen, it would be
2a + 0b -2c = 0
which means it is coefficient of H2 (a) times the index of hydrogen in H2, plus coefficient of O2 (b) times
the index of oxygen in H2 (which is zero, because there’s no oxygen in H2). Now, since water is a product, its
coefficient must be on the other side, or it must be negative to comply with the law of conservation of mass.</p>
<p>To solve this system of equations, we look for nullspace of the matrix (because this gives us the values of
a, b, and c. We then multiply the matrix by an integer to make all values integers (whole numbers).</p>
<p>Converting this into a dict, we get the result.</p>
<dl class="py property">
<dt class="sig sig-object py" id="miniChemistry.Core.Tools.Equalizer.Equalizer.coefficients">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">coefficients</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="miniChemistry.Core.html#miniChemistry.Core.Substances.Simple" title="miniChemistry.Core.Substances.Simple"><span class="pre">Simple</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="miniChemistry.Core.html#miniChemistry.Core.Substances.Molecule" title="miniChemistry.Core.Substances.Molecule"><span class="pre">Molecule</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#miniChemistry.Core.Tools.Equalizer.Equalizer.coefficients" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="miniChemistry.Core.Tools.Equalizer.Equalizer.matrix">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">matrix</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">MutableDenseMatrix</span></em><a class="headerlink" href="#miniChemistry.Core.Tools.Equalizer.Equalizer.matrix" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="miniChemistry.Core.Tools.Equalizer.Equalizer.products">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">products</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="miniChemistry.Core.html#miniChemistry.Core.Substances.Simple" title="miniChemistry.Core.Substances.Simple"><span class="pre">Simple</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="miniChemistry.Core.html#miniChemistry.Core.Substances.Molecule" title="miniChemistry.Core.Substances.Molecule"><span class="pre">Molecule</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#miniChemistry.Core.Tools.Equalizer.Equalizer.products" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="miniChemistry.Core.Tools.Equalizer.Equalizer.reagents">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">reagents</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="miniChemistry.Core.html#miniChemistry.Core.Substances.Simple" title="miniChemistry.Core.Substances.Simple"><span class="pre">Simple</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="miniChemistry.Core.html#miniChemistry.Core.Substances.Molecule" title="miniChemistry.Core.Substances.Molecule"><span class="pre">Molecule</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#miniChemistry.Core.Tools.Equalizer.Equalizer.reagents" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-miniChemistry.Core.Tools.MassConservationTest">
<span id="minichemistry-core-tools-massconservationtest-module"></span><h2>miniChemistry.Core.Tools.MassConservationTest module<a class="headerlink" href="#module-miniChemistry.Core.Tools.MassConservationTest" title="Link to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="miniChemistry.Core.Tools.MassConservationTest.mass_conservation_test">
<span class="sig-prename descclassname"><span class="pre">miniChemistry.Core.Tools.MassConservationTest.</span></span><span class="sig-name descname"><span class="pre">mass_conservation_test</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reagents</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="miniChemistry.Core.html#miniChemistry.Core.Substances.Simple" title="miniChemistry.Core.Substances.Simple"><span class="pre">Simple</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="miniChemistry.Core.html#miniChemistry.Core.Substances.Molecule" title="miniChemistry.Core.Substances.Molecule"><span class="pre">Molecule</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">products</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="miniChemistry.Core.html#miniChemistry.Core.Substances.Simple" title="miniChemistry.Core.Substances.Simple"><span class="pre">Simple</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="miniChemistry.Core.html#miniChemistry.Core.Substances.Molecule" title="miniChemistry.Core.Substances.Molecule"><span class="pre">Molecule</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coefficients</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="miniChemistry.Core.html#miniChemistry.Core.Substances.Molecule" title="miniChemistry.Core.Substances.Molecule"><span class="pre">Molecule</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="miniChemistry.Core.html#miniChemistry.Core.Substances.Simple" title="miniChemistry.Core.Substances.Simple"><span class="pre">Simple</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rel_tol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">abs_tol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#miniChemistry.Core.Tools.MassConservationTest.mass_conservation_test" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="module-miniChemistry.Core.Tools.parser">
<span id="minichemistry-core-tools-parser-module"></span><h2>miniChemistry.Core.Tools.parser module<a class="headerlink" href="#module-miniChemistry.Core.Tools.parser" title="Link to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="miniChemistry.Core.Tools.parser.get_anion">
<span class="sig-prename descclassname"><span class="pre">miniChemistry.Core.Tools.parser.</span></span><span class="sig-name descname"><span class="pre">get_anion</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">formula</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="miniChemistry.Core.Database.html#miniChemistry.Core.Database.stable.SolubilityTable.Ion" title="miniChemistry.Core.Database.stable.Ion"><span class="pre">Ion</span></a></span></span><a class="headerlink" href="#miniChemistry.Core.Tools.parser.get_anion" title="Link to this definition">¶</a></dt>
<dd><p>Extracts an anion from a substance’s formula. Returns anion’s formula and charge separately if the corresponding
anion was met in the solubility table.</p>
<p>NOTE: this function as well as get_cation() is based on a common rule that cations always go first, AND as
assumption that this module does not support molecules with several cations or anions. Hence, this function will
perform wrong with such substances as CaClBr, or NaHSO4. Also, it will misunderstand such exceptions to this
rule as NH3 and PH3. It will treat hydrogen as anion, so ammonia must be written according to convention, i.e. as H3N.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>formula</strong> – formula of a substance for which an anion has to be extracted.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a tuple containing formula of the anion and its charge.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="miniChemistry.Core.Tools.parser.get_cations">
<span class="sig-prename descclassname"><span class="pre">miniChemistry.Core.Tools.parser.</span></span><span class="sig-name descname"><span class="pre">get_cations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">formula</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="miniChemistry.Core.Database.html#miniChemistry.Core.Database.stable.SolubilityTable.Ion" title="miniChemistry.Core.Database.stable.Ion"><span class="pre">Ion</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#miniChemistry.Core.Tools.parser.get_cations" title="Link to this definition">¶</a></dt>
<dd><p>Since there are elements that form multiple cations, such as Al(1) and Al(3), it is very hard to deduce what
charge the cation has in the molecule, as this requires knowledge about indices of both cation and anion that is
quite hard to obtain.</p>
<p>Instead, this function just searches for all cations of that element and returns a list of them.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>formula</strong> – formula for which cations must be found.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a list of SolubilityTable.Ion instances, cations formed by the first chemical element in the formula.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="miniChemistry.Core.Tools.parser.index_ratios">
<span class="sig-prename descclassname"><span class="pre">miniChemistry.Core.Tools.parser.</span></span><span class="sig-name descname"><span class="pre">index_ratios</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">formula</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">round_to</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">composition</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#miniChemistry.Core.Tools.parser.index_ratios" title="Link to this definition">¶</a></dt>
<dd><p>The function returns the relative number of elements in a given substance (formula). It takes the largest index
found in a formula and divides by it all other indices. In this way it returns a dict of element symbols with
corresponding number from 0 (not including) to 1 (including, and always present).</p>
<p>For example, for a substance “H2O” the returned dict would be
index_ratios(‘H2O’)
{‘H’: 1.0, ‘O’: 0.5}</p>
<p>But for Al2(SO4)3, which can also be written as Al2S3O12 the returned dict would be
index_ratios(‘Al2(SO4)3’)
{‘O’: 1.0, ‘S’: 0.25, ‘Al’: 0.17}</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>formula</strong> – substance’s formula (as a string)</p></li>
<li><p><strong>round_to</strong> – number of digits the ratios are rounded up to, 2 by default</p></li>
<li><p><strong>composition</strong> – use in the case you want to pass to the function only a part of the molecule</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a dict with key=element (str), value=ratio of the element’s index to the largest index (float)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="miniChemistry.Core.Tools.parser.parse">
<span class="sig-prename descclassname"><span class="pre">miniChemistry.Core.Tools.parser.</span></span><span class="sig-name descname"><span class="pre">parse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">formula</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="miniChemistry.Core.html#miniChemistry.Core.Substances.Simple" title="miniChemistry.Core.Substances.Simple"><span class="pre">Simple</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="miniChemistry.Core.html#miniChemistry.Core.Substances.Molecule" title="miniChemistry.Core.Substances.Molecule"><span class="pre">Molecule</span></a></span></span><a class="headerlink" href="#miniChemistry.Core.Tools.parser.parse" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="miniChemistry.Core.Tools.parser.parse_complex_molecule">
<span class="sig-prename descclassname"><span class="pre">miniChemistry.Core.Tools.parser.</span></span><span class="sig-name descname"><span class="pre">parse_complex_molecule</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">formula</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="miniChemistry.Core.html#miniChemistry.Core.Substances.Molecule" title="miniChemistry.Core.Substances.Molecule"><span class="pre">Molecule</span></a></span></span><a class="headerlink" href="#miniChemistry.Core.Tools.parser.parse_complex_molecule" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="miniChemistry.Core.Tools.parser.parse_ion">
<span class="sig-prename descclassname"><span class="pre">miniChemistry.Core.Tools.parser.</span></span><span class="sig-name descname"><span class="pre">parse_ion</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ion_formula</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#miniChemistry.Core.Tools.parser.parse_ion" title="Link to this definition">¶</a></dt>
<dd><p>A form of writing ions accepted in this module is &lt;ion formula&gt;(&lt;ion charge&gt;). For example, an ion consisting of
sodium ation with charge equal to +1 will be written as “Na(1)”. An oxygen atom with charge equal to -2 will be
written as “O(-2)”.</p>
<p>Sometimes it is needed to parse the ion’s formula into its composition and charge separately. Hence, the formula
converts “O(-2)” into “O” (str) and -2 (int), and “Na(1)” into “Na” (str) and 1 (int).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ion_formula</strong> – formula of an ion, including ion’s charge</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>formula of an ion WITHOUT the charge, and the charge separately</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="miniChemistry.Core.Tools.parser.parse_simple_molecule">
<span class="sig-prename descclassname"><span class="pre">miniChemistry.Core.Tools.parser.</span></span><span class="sig-name descname"><span class="pre">parse_simple_molecule</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">simple_formula</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="miniChemistry.Core.html#miniChemistry.Core.Substances.Simple" title="miniChemistry.Core.Substances.Simple"><span class="pre">Simple</span></a></span></span><a class="headerlink" href="#miniChemistry.Core.Tools.parser.parse_simple_molecule" title="Link to this definition">¶</a></dt>
<dd><p>Converts a formula of a simple substance into an instance of Simple class. Since the formula of a simple substance
always consists of one element and one number, it can be split. First, the first (and the only) element is removed
by _remove_first_element and, second, the rest of the formula is slices to get the number as a string. The number
is converted into an integer, and if the length of the formula is equal to the length of the element,
which actually means that there’s no number, then the number is set to 1.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>simple_formula</strong> – formula of a simple substance to be converted into Simple instance.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>an instance of Simple.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="miniChemistry.Core.Tools.parser.split_to_elements">
<span class="sig-prename descclassname"><span class="pre">miniChemistry.Core.Tools.parser.</span></span><span class="sig-name descname"><span class="pre">split_to_elements</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">formula</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#miniChemistry.Core.Tools.parser.split_to_elements" title="Link to this definition">¶</a></dt>
<dd><p>The function disassembles the formula given into elementary strings (if we can say so) needed for this module. Namely,
the function separates all the elements, numbers and braces into separate strings and returns a list of them.</p>
<p>For example, a formula “H2O” will be converted into [‘H’, ‘2’, ‘O’], formula “Al2(SO4)3” will be converted into
[‘Al’, ‘2’, ‘(’, ‘S’, ‘O’, ‘4’, ‘)’, ‘3’].</p>
<p>NOTE: numbers are also returned as strings, not integers.
NOTE 2: multiple-symbol numbers, i.e. all numbers larger than 9 are written as a single string</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>formula</strong> – formula to be split into elements</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a list of strings containing separately elements, numbers and braces</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-miniChemistry.Core.Tools.predict">
<span id="minichemistry-core-tools-predict-module"></span><h2>miniChemistry.Core.Tools.predict module<a class="headerlink" href="#module-miniChemistry.Core.Tools.predict" title="Link to this heading">¶</a></h2>
<p>Predict.py contains one (actially, two) function (called “predict”) that takes in reagents and returns products of a
reaction. It is a  compilation of the whole Core/ReactionMechanisms submodule which uses all reaction mechanisms and
reaction restrictions.</p>
<p>The file uses MechanismsAndRestrictions.csv file to determine what mechanism and what restriction to apply to the
reagents. The file was made by manually considering all possible chemical reaction types (within this module) and
contains 40 different pathways. To make this possible, all substances are divided into several so-called effective
classes (because their real classes are given by “simple_subclass” property). There are X effective classes, namely</p>
<p>ternary acid
binary acid
base
ternary salt
binary salt
basic oxide
acidic oxide
metal
nonmetal
water
nitrate</p>
<p>The water and nitrate are separate classes, because in chemistry they are also exceptions and thus do not obey the
simple rules coded in this module, and hence have to be handled separately. Each line in the csv file consists of
four items:</p>
<p>effective class 1, effective class 2, mechanism, restriction</p>
<p>That means, each combination of the effective classes for which a reaction could proceed in real life, AND which was
possible to code with the reaction mechanisms of this module, was given a mechanism and, if needed, restriction.</p>
<p>The code below reads this file into a dictionary with classes forming a key and mechanism with restriction forming a
value. In each class pair, they are also reversed so that the order of the reagents does not matter.</p>
<p>The code below contains two functions – _effective_class() which takes in a molecule and returns a string (with the
respective effective class), and predict() which actually takes in reagents and returns products. The code also contains
some commented example code, which prints all possible reaction types. Note, that if it writes that ‘could not
predict reaction products” can mean either that the mechanism of the reaction is not supported, or that the reaction
would not happen in real life.</p>
<dl class="py function">
<dt class="sig sig-object py" id="miniChemistry.Core.Tools.predict.predict">
<span class="sig-prename descclassname"><span class="pre">miniChemistry.Core.Tools.predict.</span></span><span class="sig-name descname"><span class="pre">predict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reagent1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="miniChemistry.Core.html#miniChemistry.Core.Substances.Simple" title="miniChemistry.Core.Substances.Simple"><span class="pre">Simple</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="miniChemistry.Core.html#miniChemistry.Core.Substances.Molecule" title="miniChemistry.Core.Substances.Molecule"><span class="pre">Molecule</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">reagent2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="miniChemistry.Core.html#miniChemistry.Core.Substances.Simple" title="miniChemistry.Core.Substances.Simple"><span class="pre">Simple</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="miniChemistry.Core.html#miniChemistry.Core.Substances.Molecule" title="miniChemistry.Core.Substances.Molecule"><span class="pre">Molecule</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="miniChemistry.Core.html#miniChemistry.Core.Substances.Simple" title="miniChemistry.Core.Substances.Simple"><span class="pre">Simple</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="miniChemistry.Core.html#miniChemistry.Core.Substances.Molecule" title="miniChemistry.Core.Substances.Molecule"><span class="pre">Molecule</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#miniChemistry.Core.Tools.predict.predict" title="Link to this definition">¶</a></dt>
<dd><p>Accepts as parameters two substances (or a substance and the None) and returns its products by calling respective
mechanism and restriction to predict outcome of the reaction.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>reagent1</strong> – the first reagent, instance of Molecule or Simple</p></li>
<li><p><strong>reagent2</strong> – the second reagents, instance of Molecule, Simple or also None</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>a tuple of Molecules and Simples. Can contain from 1 to 3 substances</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-miniChemistry.Core.Tools">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-miniChemistry.Core.Tools" title="Link to this heading">¶</a></h2>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">miniChemistry</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="miniChemistry.html">miniChemistry package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="miniChemistry.html#subpackages">Subpackages</a></li>
<li class="toctree-l2"><a class="reference internal" href="miniChemistry.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="miniChemistry.html#module-miniChemistry.MiniChemistryException">miniChemistry.MiniChemistryException module</a></li>
<li class="toctree-l2"><a class="reference internal" href="miniChemistry.html#minichemistry-setup-module">miniChemistry.setup module</a></li>
<li class="toctree-l2"><a class="reference internal" href="miniChemistry.html#module-miniChemistry">Module contents</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="miniChemistry.html">miniChemistry package</a><ul>
  <li><a href="miniChemistry.Core.html">miniChemistry.Core package</a><ul>
      <li>Previous: <a href="miniChemistry.Core.ReactionMechanisms.html" title="previous chapter">miniChemistry.Core.ReactionMechanisms package</a></li>
      <li>Next: <a href="miniChemistry.Utilities.html" title="next chapter">miniChemistry.Utilities package</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2025, Antons Kutuzovs.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.3.0</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="_sources/miniChemistry.Core.Tools.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>